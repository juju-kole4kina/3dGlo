(()=>{"use strict";function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var t,n,r,o,c,a,i,l,u,s,d,m,f,v,g,p,y,h,S,E,q,L,b,A,w,C,I,k,P,x,j,O,T,D,B;j=document.querySelector("#timer-hours"),O=document.querySelector("#timer-minutes"),T=document.querySelector("#timer-seconds"),D=0,B=function(e){return 1===String(e).length?"0"+e:String(e)},D=setInterval((function(){var e,t,n,r,o=(t=0,n=0,r=0,(e=(new Date("10 july 2021").getTime()-(new Date).getTime())/1e3)>0&&(t=Math.floor(e%60),n=Math.floor(e/60%60),r=Math.floor(e/60/60)),{timeRemaining:e,hours:r,minutes:n,seconds:t});j.textContent=B(o.hours),O.textContent=B(o.minutes),T.textContent=B(o.seconds),o.timeRemaining<0&&clearInterval(D)}),1e3),k=document.querySelector(".menu"),P=document.querySelector("menu"),x=function(e){var t=e.target;(t.closest(".menu")||t!==P&&t.closest('[href^="#"]'))&&P.classList.toggle("active-menu")},k.addEventListener("click",x),P.addEventListener("click",x),b=document.querySelector(".popup"),A=document.querySelectorAll(".popup-btn"),w=document.querySelector(".popup-content"),C={count:-455,speed:15,startPos:-455,endPos:0},I=function e(){C.startPos>C.endPos?C.count-=C.speed:C.count+=C.speed,w.style.transform="translateY(".concat(C.count,"px)"),(C.startPos>C.endPos?C.count>C.endPos:C.count<C.endPos)&&requestAnimationFrame(e)},A.forEach((function(e){e.addEventListener("click",(function(){b.style.display="block",screen.width>786&&(C.count=C.startPos,requestAnimationFrame(I))}))})),b.addEventListener("click",(function(e){var t=e.target;t.classList.contains("popup-close")?b.style.display="none":(t=t.closest(".popup-content"))||(b.style.display="none")})),E=document.querySelector(".service-header"),q=E.querySelectorAll(".service-header-tab"),L=document.querySelectorAll(".service-tab"),E.addEventListener("click",(function(e){var t=e.target;(t=t.closest(".service-header-tab"))&&q.forEach((function(e,n){e===t&&function(e){for(var t=0;t<L.length;t++)e===t?(q[t].classList.add("active"),L[t].classList.remove("d-none")):(q[t].classList.remove("active"),L[t].classList.add("d-none"))}(n)}))})),h=document.querySelectorAll(".portfolio-item"),S=document.querySelector(".portfolio-dots"),h.forEach((function(){var e=document.createElement("li");e.classList.add("dot"),S.appendChild(e)})),S.children[0].classList.add("dot-active"),p=document.querySelector("#command .row"),y=function(e){var t=e.target;if(t.classList.contains("command__photo")){var n=t.src;t.src=t.dataset.img,t.dataset.img=n}},p.addEventListener("mouseover",y),p.addEventListener("mouseout",y),d=document.querySelector(".calc-block"),m=document.querySelectorAll(".form-name"),f=document.querySelectorAll(".form-email"),v=document.querySelectorAll(".form-phone"),g=document.querySelector(".mess"),d.addEventListener("input",(function(e){e.target.value=e.target.value.replace(/[^\d\.]/g,"")})),m.forEach((function(e){e.addEventListener("blur",(function(e){e.target.value=e.target.value.replace(/[^а-я ]/gi,"").replace(/\S/g,(function(e){return e.toLowerCase()})).replace(/(^|\s)\S/g,(function(e){return e.toUpperCase()})).replace(/ +/g," ").trim()}))})),f.forEach((function(e){e.addEventListener("blur",(function(e){e.target.value=e.target.value.replace(/[^a-z0-9'.@~*!_-]/gi,"").replace(/-+/g,"-").replace(/ +/g," ")}))})),v.forEach((function(e){e.addEventListener("blur",(function(e){e.target.value=e.target.value.replace(/[^()+-\d]/g,"").replace(/-+/g,"-").replace(/ +/g," ").trim()}))})),g.addEventListener("blur",(function(e){e.target.value=e.target.value.replace(/[^\dа-я-]/gi,"").replace(/-+/g,"-").replace(/ +/g," ").trim()})),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=document.querySelector(".calc-block"),n=document.querySelector(".calc-type"),r=document.querySelector(".calc-square"),o=document.querySelector(".calc-day"),c=document.querySelector(".calc-count"),a=document.getElementById("total"),i=function(){var t=0,i=1,l=1,u=n.options[n.selectedIndex].value,s=+r.value;c.value>1&&(i+=(c.value-1)/10),o.value&&o.value<5?l*=2:o.value&&o.value<10&&(l*=1.5),u&&s&&(t=e*u*s*i*l),a.textContent=t};t.addEventListener("change",(function(e){var t=e.target;t!==n&&t!==r&&t!==o&&t!==c||i()}))}(100),r=document.querySelectorAll(".portfolio-item"),document.querySelectorAll(".portfolio-btn"),o=document.querySelectorAll(".dot"),c=document.querySelector(".portfolio-content"),a=0,i=function(e,t,n){e[t].classList.remove(n)},l=function(e,t,n){e[t].classList.add(n)},u=function(){i(r,a,"portfolio-item-active"),i(o,a,"dot-active"),++a>=r.length&&(a=0),l(r,a,"portfolio-item-active"),l(o,a,"dot-active")},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3;n=setInterval(u,e)},c.addEventListener("click",(function(e){e.preventDefault();var t=e.target;t.matches(".portfolio-btn",".dot")&&(i(r,a,"portfolio-item-active"),i(o,a,"dot-active"),t.matches("#arrow-right")?a++:t.matches("#arrow-left")?a--:t.matches(".dot")&&o.forEach((function(e,n){e===t&&(a=n)})),a>=r.length&&(a=0),a<0&&(a=r.length-1),l(r,a,"portfolio-item-active"),l(o,a,"dot-active"))})),c.addEventListener("mouseover",(function(e){(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&clearInterval(n)})),c.addEventListener("mouseout",(function(e){(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&s()})),s(1500),(t=function(t){var n=document.getElementById(t),r=document.createElement("div"),o=function(e){var t=document.createElement("img"),n={load:{message:" Загрузка...",img:"./images/message/waiting.gif"},error:{message:" Что-то пошло не так...",img:"./images/message/Err.png"},success:{message:" Спасибо! Мы скоро с вами свяжемся!",img:"./images/message/OK.png"}};r.textContent=n[e].message,t.src=n[e].img,t.height=50,r.insertBefore(t,r.firstChild)};r.style.cssText="font-size: 2rem; color: #fff",n.addEventListener("submit",(function(c){var a;c.preventDefault(),o("load"),n.appendChild(r),(a=Object.fromEntries(new FormData(n)),fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).then((function(n){if(200!==n.status)throw new Error("Status network ".concat(request.status));o("success"),function(t){var n;(n=document.getElementById(t).elements,function(t){if(Array.isArray(t))return e(t)}(n)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(n)||function(t,n){if(t){if("string"==typeof t)return e(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(t,n):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).filter((function(e){return"button"!==e.tagName.toLowerCase()&&"button"!==e.type})).forEach((function(e){return e.value=""}))}(t)})).catch((function(e){o("error"),console.error(e)}))}))})("form1"),t("form2"),t("form3")})();